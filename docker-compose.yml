version: '2'
services:
    grafana:
        image: "docker.finogeeks.club/monitor/grafana"
        ports:
            - "3000:3000"
        environment:
            GF_SECURITY_ADMIN_PASSWORD: abcd@1234
            GF_SERVER_ROOT_URL: http://localhost
        volumes:
            - "/var/monitor/grafana:/var/lib/grafana"
    cadvisor:
        image: docker.finogeeks.club/monitor/cadvisor
        volumes:
          - /:/rootfs:ro
          - /var/run:/var/run:rw
          - /sys:/sys:ro
          - /var/lib/docker/:/var/lib/docker:ro
        ports:
          - "8080:8080"
    prometheus:
        image: "docker.finogeeks.club/monitor/prometheus"
        ports:
            - "9999:9090"
    alertmanager:
        image: "docker.finogeeks.club/monitor/alertmanager"
        ports:
            - "9093:9093"
    alert-webhook:
        image: "docker.finogeeks.club/monitor/alert-webhook"
        environment:
            HOMESERVER_URL: http://10.135.129.123:8008
    openldap-exporter:
        image: "docker.finogeeks.club/monitor/openldap_exporter"
        environment:
            LDAP_ADDR: tcp:host=10.135.129.123:port=389
    rancher-exporter:
        image: docker.finogeeks.club/monitor/rancher-exporter:v0.22.52
        environment:
            CATTLE_ACCESS_KEY: "4F4D2BE02702446C04C2"
            CATTLE_SECRET_KEY: "Tvu9ghH6dYJGRYjJDEHHqLhHMBXXyShg2GRoaHA3"
            CATTLE_URL: "http://10.135.158.124:8080/v2-beta"
            HIDE_SYS: "true"
    statsd-exporter:
        image: "docker.finogeeks.club/monitor/statsd-exporter"
        ports:
            - "9102:9102"
            - "9125:9125/udp"
