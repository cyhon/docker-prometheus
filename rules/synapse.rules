synapse_http_server_requests:method = sum(synapse_http_server_requests) by (method)
synapse_http_server_requests:servlet = sum(synapse_http_server_requests) by (servlet)
synapse_http_server_requests:total = sum(synapse_http_server_requests:method)
synapse_http_server_responses:code = sum(synapse_http_server_responses) by (code)

synapse_http_client_requests:method = sum(synapse_http_client_requests) by (method)
synapse_http_client_requests:total = sum(synapse_http_client_requests:method)
synapse_http_client_responses:code = sum(synapse_http_client_responses) by (code)

ALERT SynapseHTTPServerQPS
  IF rate(synapse_http_server_requests:total[1m]) > 100
  FOR 5m
  ANNOTATIONS {
    summary = "{{ $labels.instance }} SynapseHTTPServerQPS",
    description = "{{ $labels.instance }} QPS过高(当前值: {{ $value }}req/s)",
  }

ALERT SynapseHTTPClientQPS
  IF rate(synapse_http_client_requests:total[1m]) > 100
  FOR 2m
  ANNOTATIONS {
    summary = "{{ $labels.instance }} SynapseHTTPCientQPS",
    description = "{{ $labels.instance }} QPS过高(当前值: {{ $value }}req/s)",
  }
